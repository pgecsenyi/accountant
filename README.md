# Accountant

A cross-platform command line utility for calculating and verifying checksums, storing them in a centralized and unified manner, and for finding renamed files by their checksums.

## Installation and usage

Use one of the build files or _Visual Studio Code_ to build the program. This will provide you one executable in the _bin_ folder. You can also use the `go run` command of course.

The application is able to perform several different tasks (determined by the `-task` argument). The required command line arguments and their meaning depend on which task is selected. Below is a list of arguments grouped by the tasks.

  * `-task calculate`: calculate checksum for each file in the given directory and produce a CSV file containing the result.
    * `-indir`: the directory to calculate checksums for.
    * `-alg`: the algorithm to use (`crc32`, `md5`, `sha1`, `sha256`, `sha512`).
    * `-outchk`: the path of the output CSV.
    * `-bp`: base path, this part of `indir`'s path will not be written in the output. Optional.
    * `-missingonly`: if set to true `true`, checksums will be calculated for missing files only. In this case you will also have to provide an input CSV (`-inchk`). Optional, the default value is `false`.
    * `-inchk`: the path of the earlier generated CSV. Optional, ignored when `-missingonly=false`.
  * `-task compare`: compare the content of a directory with an earlier snapshot and produce a file containing old name: new name pairs as well as a new CSV file with the updated filenames.
    * `-indir`: the directory to calculate checksums for.
    * `-alg`: the algorithm to use (`crc32`, `md5`, `sha1`, `sha256`, `sha512`).
    * `-inchk`: the path of the earlier generated CSV.
    * `-outchk`: the path of the output CSV.
    * `-bp`: base path, this part of `indir`'s path will not be written in the output. Optional.
  * `-task export`: exports checksums from CSV into Total Commander's formats.
    * `-inchk`: the path of the file containing checksums.
    * `-outdir`: the directory where the output files will be generated.
    * `-filter`: filter text in _filename:algorithm_ format. The filename part must be present in the filenames of the exported entries, the algorithm part must match the algorithms. Both parts are optional, so _filename_, _filename:_ and _:algorithm_ are all valid filtering expressions, but the whole `filter` parameter can be ommitted.
    * `-bp`: base path, the prefix which should be added to each path in the output. Optional.
  * `-task import`: import checksums from files generated by Linux utilities or Total Commander.
    * `-indir`: the directory containing the checksums to import.
    * `-outchk`: the path of the output CSV.
  * `-task verify`: verifies the files listed in the input file.
    * `-inchk`: the path of the file containing checksums.
    * `-bp`: the base path for each entry listed in the input. Optional.
    * `-missingonly`: if set to true `true`, only paths will be examined, checking whether they exist or not, otherwise checksums will be also verified. Optional, the default value is `false`.
    * `-filter`: just the same filter expression with the same purpose as for export.

## Development Environment

  * Windows 10
  * Go 1.7.4 Windows amd64
  * Visual Studio Code 1.15.1
    * Extension: Go 0.6.65
  * goconvey
